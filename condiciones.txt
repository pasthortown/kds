Descripción general de la funcionalidad

Todas las tareas descritas conforman una única funcionalidad integrada de actualización de órdenes en tiempo real.

El backend expone un API a través del cual se reciben las órdenes provenientes de MaxPoint (sistema POS). Para lograr un flujo correcto, es necesario modificar MaxPoint de forma que:

Envíe las órdenes en curso cuando se encuentren en estado PROCESANDO.

Remita nuevamente la orden cuando esta pase al modo Facturación, marcándola con el estado TOMADA.

Todas las órdenes deben ser enviadas siempre al backend, el cual será el punto central de orquestación.

El backend será responsable de:

Mantener las órdenes actualizadas en tiempo real.

Persistir los cambios en PostgreSQL.

Notificar los cambios al frontend vía WebSocket, para que la interfaz refleje inmediatamente las actualizaciones.

Etapas de implementación
1. Modo Polling (estado actual / contingencia)

Mientras la comunicación directa por API dependa de la disponibilidad de MaxPoint, el sistema debe continuar operando en modo polling:

El backend consulta periódicamente la base de datos PostgreSQL.

Se detectan cambios en las órdenes.

El frontend se actualiza en función de los resultados obtenidos.

Este modo garantiza continuidad operativa cuando MaxPoint no envía eventos en tiempo real.

2. Modo API (flujo ideal)

En el modo API, MaxPoint se convierte en el emisor activo de eventos:

MaxPoint envía directamente las órdenes al API del backend.

El backend procesa la información recibida.

Los cambios se notifican inmediatamente al frontend mediante WebSocket (WS).

El frontend actualiza las órdenes en pantalla sin necesidad de polling.

3. Nueva funcionalidad: actualización de órdenes en tiempo real
3.1 Envío de órdenes desde MaxPoint (Tiempo Real)

Es necesario modificar MaxPoint para que:

Durante la toma del pedido, envíe la orden al API en estado PROCESANDO, incluyendo todos los cambios que ocurran mientras el pedido está en curso.

Al pasar al proceso de Facturación, la orden se envíe nuevamente con estado TOMADA.

El frontend utilizará estos estados para:

Diferenciar visualmente las órdenes.

Indicar al cocinero qué órdenes están en curso y cuáles ya han sido confirmadas.

3.2 Recepción, persistencia y notificación en el backend

En el backend debe existir un flujo único para la recepción de órdenes vía API:

Cada orden recibida debe almacenarse en PostgreSQL.

Si ya existe una orden con el mismo ID, esta debe actualizarse.

Cada inserción o actualización debe:

Disparar una notificación vía WebSocket.

Informar al frontend que existen cambios en las órdenes.

El frontend, al recibir la notificación, debe refrescar las órdenes en pantalla.


Alanys - Colores por canal.- Si es Salon Kiosko Llevar Domicilio debe tener un color identificativo.
Alanys - Color de la cantidad.- El color de la cantidad cambia pero si es un color muy claro no se lo visualiza hay qeu corregir el tono usado, y mucho mejor si se coloca como parametor de configuracion en backoffice y se establece el color para cada situacion en fucion del SLA
