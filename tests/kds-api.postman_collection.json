{
  "info": {
    "_postman_id": "kds-api-collection-v1",
    "name": "KDS API - Test Collection",
    "description": "Coleccion de pruebas para el API del Sistema KDS",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "screenId",
      "value": "",
      "type": "string"
    },
    {
      "key": "queueId",
      "value": "",
      "type": "string"
    },
    {
      "key": "orderId",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has status ok', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('ok');",
                  "});",
                  "",
                  "pm.test('Response has timestamp', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.timestamp).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/health",
              "host": ["http://localhost:3000"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "Config Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has status healthy', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('healthy');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/config/health",
              "host": ["{{baseUrl}}"],
              "path": ["config", "health"]
            }
          }
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login - Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has tokens', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.accessToken).to.be.a('string');",
                  "    pm.expect(jsonData.refreshToken).to.be.a('string');",
                  "});",
                  "",
                  "pm.test('Response has user object', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.user).to.be.an('object');",
                  "    pm.expect(jsonData.user.email).to.eql('admin@kds.local');",
                  "});",
                  "",
                  "// Save tokens and userId for subsequent requests",
                  "var jsonData = pm.response.json();",
                  "pm.collectionVariables.set('accessToken', jsonData.accessToken);",
                  "pm.collectionVariables.set('refreshToken', jsonData.refreshToken);",
                  "if (jsonData.user && jsonData.user.id) {",
                  "    pm.collectionVariables.set('userId', jsonData.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@kds.local\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Login - Invalid Credentials",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Response has error message', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.error).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@kds.local\",\n  \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Get Current User (Me)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has user data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.user).to.be.an('object');",
                  "    pm.expect(jsonData.user.email).to.eql('admin@kds.local');",
                  "    pm.expect(jsonData.user.role).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            }
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has new access token', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.accessToken).to.be.a('string');",
                  "});",
                  "",
                  "// Update access token",
                  "var jsonData = pm.response.json();",
                  "pm.collectionVariables.set('accessToken', jsonData.accessToken);",
                  "if (jsonData.refreshToken) {",
                  "    pm.collectionVariables.set('refreshToken', jsonData.refreshToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          }
        }
      ]
    },
    {
      "name": "Queues",
      "item": [
        {
          "name": "Get All Queues",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is an array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Queues have required fields', function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0].id).to.exist;",
                  "        pm.expect(jsonData[0].name).to.exist;",
                  "    }",
                  "});",
                  "",
                  "// Save first queue ID if exists",
                  "var jsonData = pm.response.json();",
                  "if (jsonData.length > 0) {",
                  "    pm.collectionVariables.set('queueId', jsonData[0].id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/queues",
              "host": ["{{baseUrl}}"],
              "path": ["queues"]
            }
          }
        },
        {
          "name": "Get Queue by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has queue data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.id).to.exist;",
                  "    pm.expect(jsonData.name).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/queues/{{queueId}}",
              "host": ["{{baseUrl}}"],
              "path": ["queues", "{{queueId}}"]
            }
          }
        },
        {
          "name": "Get Queue Stats",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has stats data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/queues/{{queueId}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["queues", "{{queueId}}", "stats"]
            }
          }
        }
      ]
    },
    {
      "name": "Screens",
      "item": [
        {
          "name": "Get All Screens",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is an array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Screens have required fields', function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0].id).to.exist;",
                  "        pm.expect(jsonData[0].number).to.exist;",
                  "        pm.expect(jsonData[0].name).to.exist;",
                  "    }",
                  "});",
                  "",
                  "// Save first screen ID if exists",
                  "var jsonData = pm.response.json();",
                  "if (jsonData.length > 0) {",
                  "    pm.collectionVariables.set('screenId', jsonData[0].id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/screens",
              "host": ["{{baseUrl}}"],
              "path": ["screens"]
            }
          }
        },
        {
          "name": "Get Screen by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has screen data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.id).to.exist;",
                  "    pm.expect(jsonData.number).to.exist;",
                  "    pm.expect(jsonData.name).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/screens/{{screenId}}",
              "host": ["{{baseUrl}}"],
              "path": ["screens", "{{screenId}}"]
            }
          }
        },
        {
          "name": "Get Screen Config",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has config data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/screens/{{screenId}}/config",
              "host": ["{{baseUrl}}"],
              "path": ["screens", "{{screenId}}", "config"]
            }
          }
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Get All Orders",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has orders array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.orders).to.be.an('array');",
                  "});",
                  "",
                  "// Save first order ID if exists",
                  "var jsonData = pm.response.json();",
                  "if (jsonData.orders && jsonData.orders.length > 0) {",
                  "    pm.collectionVariables.set('orderId', jsonData.orders[0].id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": ["{{baseUrl}}"],
              "path": ["orders"]
            }
          }
        },
        {
          "name": "Get Orders by Status (PENDING)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has orders array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.orders).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('All orders have PENDING status', function () {",
                  "    var jsonData = pm.response.json();",
                  "    jsonData.orders.forEach(function(order) {",
                  "        pm.expect(order.status).to.eql('PENDING');",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders?status=PENDING",
              "host": ["{{baseUrl}}"],
              "path": ["orders"],
              "query": [
                {
                  "key": "status",
                  "value": "PENDING"
                }
              ]
            }
          }
        },
        {
          "name": "Get Orders by Status (FINISHED)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has orders array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.orders).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('All orders have FINISHED status', function () {",
                  "    var jsonData = pm.response.json();",
                  "    jsonData.orders.forEach(function(order) {",
                  "        pm.expect(order.status).to.eql('FINISHED');",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders?status=FINISHED",
              "host": ["{{baseUrl}}"],
              "path": ["orders"],
              "query": [
                {
                  "key": "status",
                  "value": "FINISHED"
                }
              ]
            }
          }
        },
        {
          "name": "Get Order by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has order data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.id).to.exist;",
                  "    pm.expect(jsonData.status).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "{{orderId}}"]
            }
          }
        },
        {
          "name": "Get Order Stats",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has stats', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/stats",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "stats"]
            }
          }
        },
        {
          "name": "Get Dashboard Stats",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has summary', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.summary).to.exist;",
                  "    pm.expect(jsonData.summary.pending).to.be.a('number');",
                  "    pm.expect(jsonData.summary.onTime).to.be.a('number');",
                  "    pm.expect(jsonData.summary.outOfTime).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('Response has byScreen array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.byScreen).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Response has hourlyStats array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.hourlyStats).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders/dashboard-stats?timeLimit=5",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "dashboard-stats"],
              "query": [
                {
                  "key": "timeLimit",
                  "value": "5"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Reports",
      "item": [
        {
          "name": "Get Dashboard Report",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has metadata', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.metadata).to.exist;",
                  "    pm.expect(jsonData.metadata.id_restaurante).to.exist;",
                  "    pm.expect(jsonData.metadata.generatedAt).to.exist;",
                  "    pm.expect(jsonData.metadata.timeLimit).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('Response has summary', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.summary).to.exist;",
                  "    pm.expect(jsonData.summary.pending).to.be.a('number');",
                  "    pm.expect(jsonData.summary.onTimePercentage).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('Response has screenStatus', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.screenStatus).to.exist;",
                  "    pm.expect(jsonData.screenStatus.total).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('Response has highlights', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.highlights).to.exist;",
                  "});",
                  "",
                  "pm.test('Response has byScreen array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.byScreen).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Response has byChannel array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.byChannel).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Response has hourlyStats array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.hourlyStats).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Response has screens array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.screens).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reports/dashboard?timeLimit=5",
              "host": ["{{baseUrl}}"],
              "path": ["reports", "dashboard"],
              "query": [
                {
                  "key": "timeLimit",
                  "value": "5"
                }
              ]
            }
          }
        },
        {
          "name": "Get Daily Summary",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has date', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.date).to.exist;",
                  "    pm.expect(jsonData.dateFormatted).to.exist;",
                  "});",
                  "",
                  "pm.test('Response has totals', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.totals).to.exist;",
                  "    pm.expect(jsonData.totals.total).to.be.a('number');",
                  "    pm.expect(jsonData.totals.finished).to.be.a('number');",
                  "    pm.expect(jsonData.totals.pending).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('Response has times', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.times).to.exist;",
                  "    pm.expect(jsonData.times.avgFinishTime).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('Response has byChannel array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.byChannel).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reports/daily-summary",
              "host": ["{{baseUrl}}"],
              "path": ["reports", "daily-summary"]
            }
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get All Users",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is an array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Users have required fields', function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0].id).to.exist;",
                  "        pm.expect(jsonData[0].email).to.exist;",
                  "        pm.expect(jsonData[0].role).to.exist;",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          }
        },
        {
          "name": "Get User by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Skip test if userId is not set",
                  "var userId = pm.collectionVariables.get('userId');",
                  "if (!userId || userId === 'null' || userId === '') {",
                  "    pm.test.skip('User ID not available - skipping test');",
                  "} else {",
                  "    pm.test('Status code is 200', function () {",
                  "        pm.response.to.have.status(200);",
                  "    });",
                  "",
                  "    pm.test('Response has user data', function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.id).to.exist;",
                  "        pm.expect(jsonData.email).to.exist;",
                  "        pm.expect(jsonData.role).to.exist;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Config",
      "item": [
        {
          "name": "Get General Config",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has config data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/config/general",
              "host": ["{{baseUrl}}"],
              "path": ["config", "general"]
            }
          }
        },
        {
          "name": "Get System Stats",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has stats', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/config/stats",
              "host": ["{{baseUrl}}"],
              "path": ["config", "stats"]
            }
          }
        },
        {
          "name": "Get Config Modes",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has modes', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/config/modes",
              "host": ["{{baseUrl}}"],
              "path": ["config", "modes"]
            }
          }
        }
      ]
    },
    {
      "name": "Mirror",
      "item": [
        {
          "name": "Test Mirror Connection",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200 or 503', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 503]);",
                  "});",
                  "",
                  "pm.test('Response has connection info', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/mirror/test",
              "host": ["{{baseUrl}}"],
              "path": ["mirror", "test"]
            }
          }
        },
        {
          "name": "Get Mirror Stats",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has stats', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/mirror/stats",
              "host": ["{{baseUrl}}"],
              "path": ["mirror", "stats"]
            }
          }
        }
      ]
    },
    {
      "name": "Unauthorized Access",
      "item": [
        {
          "name": "Orders without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Response has error', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.error).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": ["{{baseUrl}}"],
              "path": ["orders"]
            }
          }
        },
        {
          "name": "Reports without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Response has error', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.error).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reports/dashboard",
              "host": ["{{baseUrl}}"],
              "path": ["reports", "dashboard"]
            }
          }
        },
        {
          "name": "Users without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Response has error', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.error).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          }
        }
      ]
    }
  ]
}
